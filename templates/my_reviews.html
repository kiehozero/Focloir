{% extends "main.html" %}

    {% block content %}

        <div class="row center-align">
            <h4>{{ username }}'s profile</h4>
        </div>

        <div class="row center-align">

            <a class="button btn-large" href="{{ url_for('edit_profile', username=session['user']) }}">Edit Profile</a>
            <a class="button btn-large" href="{{ url_for('logout') }}">Log Out</a>
        </div>

        <div class="row"> 

            <div class="col s6 m3">
                    <div class="card">
                        <div class="card-image">
                        <img src="{{ url_for('static', filename='images/pintbaby-bg.png') }}">
                        <span class="card-title">Add review</span>
                        <a 
                            class="btn-floating halfway-fab waves-effect waves-light"
                            href="{{ url_for('add_review') }}">
                            <i class="fas fa-pen-nib"></i>
                        </a>
                        </div>
                        <div class="card-content spectral">
                        <p>
                            Click the button to submit a review
                        </p>
                        </div>
                    </div>
                </div>

            {% for review in reviews %}
                <div class="col s6 m3">
                    <div class="card">

                        <!-- First card is always the option to add a new review -->
                        <div class="card-image activator">
                            <img src="{{ url_for('static', filename='images/pintbaby-bg.png') }}">
                            <span class="card-title">{{ review.pub }}</span>
                            <a
                                class="btn-floating halfway-fab waves-effect waves-light left"
                                href="#">
                                <!-- href will take you to expanded view_review page -->
                                <div 
                                    style="font-family: 'Fraunces'; font-weight: 600; font-size: 20px; text-align: center;">
                                    {{ review.prating }}
                                </div>
                            </a>
                            <a
                                class="btn-floating halfway-fab waves-effect waves-light right"
                                href="#">
                                <i class="fas fa-book-open"></i>
                                <!-- expand this button to read review and see full information, 
                                could use Card Reveal from materialize, need to refer to review ID?  -->
                            </a>
                        </div>

                        <!-- Returns reviews submitted by this user -->
                        <div class="card-content spectral">
                            <p>
                                <br>
                                <div class="center-align">
                                    Pint: {{ review.drating }}/10
                                    Price: {{ review.price }}
                                </div>
                                <br>
                                <div class="center-align">
                                    <a 
                                        class="btn review-card-button"
                                        href="{{ url_for('edit_review', review_id=review._id) }}">
                                        Edit
                                    </a>
                                    <a
                                        class="btn review-card-button"
                                        href="{{ url_for('delete_review', review_id=review._id) }}">
                                        Delete
                                    </a>
                                </div>
                            </p>
                        </div>

                        <div class="card-reveal">
                            <div class="row">
                                <span class="card-title activator">
                                    <!-- need to display properly-->
                                    <i class="left">{{ review.visit }}</i>
                                    <i class="right fas fa-angle-down d-brown"></i>
                                </span>
                            </div>

                            <div class="row">
                                {{ review.review }}
                            </div>

                            <div class="row revrow center-align">
                                <div class="col s6 revbox-g">
                                    {{ review.pint }} price:
                                    <br>
                                    {{ review.price }}
                                </div>
                                <div class="col s6 revbox-b">
                                    {{ review.pint }} verdict:
                                    <br>
                                    {{ review.drating }}/10
                                </div>
                                <div class="col s6 revbox-b">
                                    Atmosphere:
                                    <br>
                                    {{ review.arating }}/10
                                </div>
                                <div class="col s6 revbox-g">
                                    Overall:
                                    <br>
                                    {{ review.prating }}/10
                                </div>
                            </div>

                            <div class="row center-align">
                                <a 
                                    class="btn review-card-button"
                                    href="{{ url_for('edit_review', review_id=review._id) }}">
                                    Edit
                                </a>
                                <a
                                    class="btn review-card-button"
                                    href="{{ url_for('delete_review', review_id=review._id) }}">
                                    Delete
                                </a>
                            </div>
                        </div>

                    </div>
                </div>
            {% endfor %}

        </div>

    {% endblock %}