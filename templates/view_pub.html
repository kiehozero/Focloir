{% extends "main.html" %}

    {% block title %}
        {{ pub_id.city }}'s {{ pub_id.pname }}
    {% endblock %}

    {% block content %}

        <h2 class="center-align">{{ pub_id.pname }}</h2>

        <h5 class="center-align">{{ pub_id.loc}}, {{ pub_id.city }}, {{ pub_id.country }}</h5>

        <div class="row center-align">
            {% for review in reviews %}
                {% if pub_id.pname == review.pub %}
                    <div class="col s12 m4">
                        <div class="card revcard">
                            <div class="card-image">
                                <img class="activator" src="{{ url_for('static', filename='images/pintbaby-bg.png') }}">
                                <div class="btn-floating activator halfway-fab waves-effect waves-yellow review-dot">
                                    <i class="material-icons">{{ review.prating }}</i>
                                </div>
                            </div>
                            <div class="card-content">
                                <span class="card-title activator">
                                    <i class="left">{{ review.visit }}, {{ review.author }}</i>
                                    <br>
                                </span>
                            </div>
                            <div class="card-reveal">
                                <div class="row">
                                    <span class="card-title activator">
                                        <!-- need to display properly-->
                                        <i class="left">{{ review.visit }}, {{ review.author }}</i>
                                        <i class="right fas fa-angle-up d-brown"></i>
                                    </span>
                                </div>

                                <!-- Displays review text on open -->
                                <div class="row">
                                    <div class="col s12">
                                        {{ review.review }}
                                    </div>
                                </div>

                                <!-- Displays review scores on open -->
                                <div class="row revrow">
                                    <div class="col s6 revbox-g">
                                        {{ review.pint }} price:
                                        <br>
                                        {{ review.price }}
                                    </div>
                                    <div class="col s6 revbox-b">
                                        {{ review.pint }} verdict:
                                        <br>
                                        {{ review.drating }}/10
                                    </div>
                                    <div class="col s6 revbox-b">
                                        Atmosphere:
                                        <br>
                                        {{ review.arating }}/10
                                    </div>
                                    <div class="col s6 revbox-g">
                                        Overall:
                                        <br>
                                        {{ review.prating }}/10
                                    </div>
                                </div>
                            </div>

                            {% if session.user == "pbadmin" %}
                                <div class="row">
                                    <!-- edit button that contains additional user form option for user, this 
                                    will need to be pre-filled with the original editor's username so it isn't 
                                    overwritten with the admin's name-->
                                    <br>
                                    <div class="center-align">
                                        <!-- below will need to be a new admin_edit_review function-->
                                        <a 
                                            class="btn review-card-button"
                                            href="{{ url_for('edit_review', review_id=review._id) }}">
                                            Edit
                                        </a>
                                        <a
                                            class="btn review-card-button"
                                            href="{{ url_for('delete_review', review_id=review._id) }}">
                                            <!-- Style delete buttons in the pallette red colour -->
                                            Delete
                                        </a>
                                        <!-- style in margin or padding bottom here -->
                                    </div>
                                </div>
                            {% endif %}

                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

    {% endblock %}